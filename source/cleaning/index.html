



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://vinkrish.github.io/MachineLearning/source/cleaning/">
      
      
        <meta name="author" content="Vinay Krishna">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>Cleaning - Machine Learning</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#cleaning-example" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://vinkrish.github.io/MachineLearning/" title="Machine Learning" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Machine Learning
            </span>
            <span class="md-header-nav__topic">
              Cleaning
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/vinkrish/MachineLearning/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    vinkrish/MachineLearning
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://vinkrish.github.io/MachineLearning/" title="Machine Learning" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Machine Learning
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/vinkrish/MachineLearning/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    vinkrish/MachineLearning
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../dap/" title="Data Analysis Process" class="md-nav__link">
      Data Analysis Process
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ml_workflow/" title="Machine Learning Workflow" class="md-nav__link">
      Machine Learning Workflow
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Andrew Ng's ML Course
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Andrew Ng's ML Course
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Week 1
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Week 1
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/model_representation/" title="Model Representation" class="md-nav__link">
      Model Representation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/cost_function/" title="Cost Function" class="md-nav__link">
      Cost Function
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/cost_function_intuition_1/" title="Cost Function Intuition 1" class="md-nav__link">
      Cost Function Intuition 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/cost_function_intuition_2/" title="Cost Function Intuition 2" class="md-nav__link">
      Cost Function Intuition 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/gradient_descent/" title="Gradient Descent" class="md-nav__link">
      Gradient Descent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/gradient_descent_intuition/" title="Gradient Descent Intuition" class="md-nav__link">
      Gradient Descent Intuition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week_1/gd_for_linear_regression/" title="Gradient Descent For Linear Regression" class="md-nav__link">
      Gradient Descent For Linear Regression
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../NumPy/" title="NumPy" class="md-nav__link">
      NumPy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Pandas/" title="Pandas" class="md-nav__link">
      Pandas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DataFrame/" title="DataFrame" class="md-nav__link">
      DataFrame
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../PracticeProblem/" title="Practice Problem" class="md-nav__link">
      Practice Problem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../assessing/" title="Assessing" class="md-nav__link">
      Assessing
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cleaning
      </label>
    
    <a href="./" title="Cleaning" class="md-nav__link md-nav__link--active">
      Cleaning
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lets-address-three-issues-in-this-dataset-that-are-quite-common-in-the-real-world" title="Let's address three issues in this dataset that are quite common in the real world" class="md-nav__link">
    Let's address three issues in this dataset that are quite common in the real world
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filling-null-values" title="Filling null values" class="md-nav__link">
    Filling null values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropping-duplicates" title="Dropping Duplicates" class="md-nav__link">
    Dropping Duplicates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#converting-to-datetime" title="Converting to datetime" class="md-nav__link">
    Converting to datetime
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plotting_with_pandas/" title="Plotting" class="md-nav__link">
      Plotting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../conclusions/" title="Conclusion" class="md-nav__link">
      Conclusion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../communicate/" title="Communicate" class="md-nav__link">
      Communicate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../case_study/" title="Case Study" class="md-nav__link">
      Case Study
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lets-address-three-issues-in-this-dataset-that-are-quite-common-in-the-real-world" title="Let's address three issues in this dataset that are quite common in the real world" class="md-nav__link">
    Let's address three issues in this dataset that are quite common in the real world
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filling-null-values" title="Filling null values" class="md-nav__link">
    Filling null values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropping-duplicates" title="Dropping Duplicates" class="md-nav__link">
    Dropping Duplicates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#converting-to-datetime" title="Converting to datetime" class="md-nav__link">
    Converting to datetime
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/vinkrish/MachineLearning/edit/master/docs/source/cleaning.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="cleaning-example">Cleaning Example</h1>
<p>Let's explore ways of fixing some common issues in data. Here's a toy dataset I created for this lesson. It has eleven instances of user-product interactions online, recording whether the user liked the product, how long they viewed the product, whether it was on a website or through a mobile app, and what time they started viewing the product. Can you spot any potential issues in this data?</p>
<pre><code class="python">import pandas as pd

df = pd.read_csv('product_view_data.csv')
df
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>product_id</th>
      <th>liked</th>
      <th>view_duration</th>
      <th>source</th>
      <th>timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3987</td>
      <td>997021</td>
      <td>True</td>
      <td>1.048242</td>
      <td>web</td>
      <td>2017-09-23 00:18:29.056895</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6300</td>
      <td>865003</td>
      <td>True</td>
      <td>1.688173</td>
      <td>web</td>
      <td>2017-09-21 02:20:22.022096</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6451</td>
      <td>712951</td>
      <td>False</td>
      <td>NaN</td>
      <td>mobile</td>
      <td>2017-09-07 11:57:50.044683</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5700</td>
      <td>587019</td>
      <td>False</td>
      <td>0.493194</td>
      <td>web</td>
      <td>2017-09-07 00:25:07.019097</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3400</td>
      <td>505123</td>
      <td>True</td>
      <td>NaN</td>
      <td>web</td>
      <td>2017-09-07 13:53:21.008403</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8403</td>
      <td>459916</td>
      <td>False</td>
      <td>0.675041</td>
      <td>mobile</td>
      <td>2017-09-25 21:54:00.028323</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8965</td>
      <td>943363</td>
      <td>False</td>
      <td>NaN</td>
      <td>web</td>
      <td>2017-09-17 15:12:21.059489</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9693</td>
      <td>787546</td>
      <td>True</td>
      <td>0.101743</td>
      <td>web</td>
      <td>2017-09-26 12:34:46.012559</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4107</td>
      <td>811855</td>
      <td>False</td>
      <td>3.112086</td>
      <td>web</td>
      <td>2017-09-01 10:50:07.042593</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="python">df.info()
</code></pre>

<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 11 entries, 0 to 10
Data columns (total 6 columns):
user_id          11 non-null int64
product_id       11 non-null int64
liked            11 non-null bool
view_duration    8 non-null float64
source           11 non-null object
timestamp        11 non-null object
dtypes: bool(1), float64(1), int64(2), object(2)
memory usage: 531.0+ bytes
</code></pre>
<h2 id="lets-address-three-issues-in-this-dataset-that-are-quite-common-in-the-real-world">Let's address three issues in this dataset that are quite common in the real world</h2>
<ul>
<li>Missing data (in the <code>view_duration</code> columns)</li>
<li>Duplicates (rows 3 and 4)</li>
<li>Incorrect Datatypes (<code>timestamp</code> is represented as a string)</li>
</ul>
<h2 id="filling-null-values">Filling null values</h2>
<p>In the dataframe above, you can see null values represented as <code>NaN</code>, which stands for not a number. From the output of <code>df.info()</code> you can see that there are 8 non-null values, which leaves 3 null values of the 11 entries. <a href="https://en.wikipedia.org/wiki/Missing_data">Missing data</a> is an issue that should be handled differently depending on several factors, such as the reason those values are missing and whether the occurrences seem random. One way of handling them is [imputing](https://en.wikipedia.org/wiki/Imputation_(statistics) them with the mean. You can do this quickly and efficiently with a convenient function from Pandas.</p>
<pre><code class="python"># get the mean of the column with missing data
mean = df['view_duration'].mean()
print(mean)
</code></pre>

<pre><code>0.9383504902905304
</code></pre>
<pre><code class="python"># replace NaN values with the mean
df['view_duration'].fillna(mean)
</code></pre>

<pre><code>0     1.048242
1     1.688173
2     0.938350
3     0.194162
4     0.194162
5     0.493194
6     0.938350
7     0.675041
8     0.938350
9     0.101743
10    3.112086
Name: view_duration, dtype: float64
</code></pre>
<p>Let's look at the dataframe now - did this fix the problem?</p>
<pre><code class="python">df
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>product_id</th>
      <th>liked</th>
      <th>view_duration</th>
      <th>source</th>
      <th>timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3987</td>
      <td>997021</td>
      <td>True</td>
      <td>1.048242</td>
      <td>web</td>
      <td>2017-09-23 00:18:29.056895</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6300</td>
      <td>865003</td>
      <td>True</td>
      <td>1.688173</td>
      <td>web</td>
      <td>2017-09-21 02:20:22.022096</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6451</td>
      <td>712951</td>
      <td>False</td>
      <td>NaN</td>
      <td>mobile</td>
      <td>2017-09-07 11:57:50.044683</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5700</td>
      <td>587019</td>
      <td>False</td>
      <td>0.493194</td>
      <td>web</td>
      <td>2017-09-07 00:25:07.019097</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3400</td>
      <td>505123</td>
      <td>True</td>
      <td>NaN</td>
      <td>web</td>
      <td>2017-09-07 13:53:21.008403</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8403</td>
      <td>459916</td>
      <td>False</td>
      <td>0.675041</td>
      <td>mobile</td>
      <td>2017-09-25 21:54:00.028323</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8965</td>
      <td>943363</td>
      <td>False</td>
      <td>NaN</td>
      <td>web</td>
      <td>2017-09-17 15:12:21.059489</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9693</td>
      <td>787546</td>
      <td>True</td>
      <td>0.101743</td>
      <td>web</td>
      <td>2017-09-26 12:34:46.012559</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4107</td>
      <td>811855</td>
      <td>False</td>
      <td>3.112086</td>
      <td>web</td>
      <td>2017-09-01 10:50:07.042593</td>
    </tr>
  </tbody>
</table>
</div>

<p>Instead of making changes to the original column, it just returned a new column with the changes, which we didn't store anywhere. To keep the changes, make sure to assign it to the original like this:</p>
<p><code>df['view_duration'] = df['view_duration'].fillna(mean)</code></p>
<p>Alternatively, you can use an extra parameter as shown in the cell below.</p>
<pre><code class="python"># replace NaN values and make changes in place
df['view_duration'].fillna(mean, inplace=True)
</code></pre>

<pre><code class="python">df
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>product_id</th>
      <th>liked</th>
      <th>view_duration</th>
      <th>source</th>
      <th>timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3987</td>
      <td>997021</td>
      <td>True</td>
      <td>1.048242</td>
      <td>web</td>
      <td>2017-09-23 00:18:29.056895</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6300</td>
      <td>865003</td>
      <td>True</td>
      <td>1.688173</td>
      <td>web</td>
      <td>2017-09-21 02:20:22.022096</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6451</td>
      <td>712951</td>
      <td>False</td>
      <td>0.938350</td>
      <td>mobile</td>
      <td>2017-09-07 11:57:50.044683</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5700</td>
      <td>587019</td>
      <td>False</td>
      <td>0.493194</td>
      <td>web</td>
      <td>2017-09-07 00:25:07.019097</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3400</td>
      <td>505123</td>
      <td>True</td>
      <td>0.938350</td>
      <td>web</td>
      <td>2017-09-07 13:53:21.008403</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8403</td>
      <td>459916</td>
      <td>False</td>
      <td>0.675041</td>
      <td>mobile</td>
      <td>2017-09-25 21:54:00.028323</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8965</td>
      <td>943363</td>
      <td>False</td>
      <td>0.938350</td>
      <td>web</td>
      <td>2017-09-17 15:12:21.059489</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9693</td>
      <td>787546</td>
      <td>True</td>
      <td>0.101743</td>
      <td>web</td>
      <td>2017-09-26 12:34:46.012559</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4107</td>
      <td>811855</td>
      <td>False</td>
      <td>3.112086</td>
      <td>web</td>
      <td>2017-09-01 10:50:07.042593</td>
    </tr>
  </tbody>
</table>
</div>

<p>Success!</p>
<h2 id="dropping-duplicates">Dropping Duplicates</h2>
<p>There are multiple reasons you may end up with duplicated data, like combined data sources or human error. Here's a simple scenario where two rows (3 and 4) are identical. This toy dataset is small enough for us to count visually. For bigger datasets, you can use this function to see which rows are duplicates.</p>
<pre><code class="python"># By default, this marks duplicates as True excluding the first instance,
# and it considers a row to be a duplicate only if the values in all
# columns match. You can change both of these with its parameters.
df.duplicated()
</code></pre>

<pre><code>0     False
1     False
2     False
3     False
4      True
5     False
6     False
7     False
8     False
9     False
10    False
dtype: bool
</code></pre>
<pre><code class="python"># For larger datasets, it would probably be more helpful to get a count
# of duplicates in the dataset like this
sum(df.duplicated())
</code></pre>

<pre><code>1
</code></pre>
<pre><code class="python"># You can drop duplicated data with this function. Remember to use
# assigned it to the original dataframe or use inplace to keep changes!
df.drop_duplicates(inplace=True)
</code></pre>

<pre><code class="python">df
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user_id</th>
      <th>product_id</th>
      <th>liked</th>
      <th>view_duration</th>
      <th>source</th>
      <th>timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3987</td>
      <td>997021</td>
      <td>True</td>
      <td>1.048242</td>
      <td>web</td>
      <td>2017-09-23 00:18:29.056895</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6300</td>
      <td>865003</td>
      <td>True</td>
      <td>1.688173</td>
      <td>web</td>
      <td>2017-09-21 02:20:22.022096</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6451</td>
      <td>712951</td>
      <td>False</td>
      <td>0.938350</td>
      <td>mobile</td>
      <td>2017-09-07 11:57:50.044683</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7782</td>
      <td>283235</td>
      <td>True</td>
      <td>0.194162</td>
      <td>mobile</td>
      <td>2017-09-17 03:48:20.019677</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5700</td>
      <td>587019</td>
      <td>False</td>
      <td>0.493194</td>
      <td>web</td>
      <td>2017-09-07 00:25:07.019097</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3400</td>
      <td>505123</td>
      <td>True</td>
      <td>0.938350</td>
      <td>web</td>
      <td>2017-09-07 13:53:21.008403</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8403</td>
      <td>459916</td>
      <td>False</td>
      <td>0.675041</td>
      <td>mobile</td>
      <td>2017-09-25 21:54:00.028323</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8965</td>
      <td>943363</td>
      <td>False</td>
      <td>0.938350</td>
      <td>web</td>
      <td>2017-09-17 15:12:21.059489</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9693</td>
      <td>787546</td>
      <td>True</td>
      <td>0.101743</td>
      <td>web</td>
      <td>2017-09-26 12:34:46.012559</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4107</td>
      <td>811855</td>
      <td>False</td>
      <td>3.112086</td>
      <td>web</td>
      <td>2017-09-01 10:50:07.042593</td>
    </tr>
  </tbody>
</table>
</div>

<p>Awesome! You can see we've dropped row 4 - the row marked as a duplicate. This was a simple situation where the entire row was identical. You could imagine duplicated data scenarios that are a bit more complicated.</p>
<p>For example, let's say we had data on patients from a hospital. What happens when you come across two rows with the same patient id but different data on medical exam results? Do you combine them? Only keep the latest one? This is a situation you'd have to investigate more. For this scenario, you'd likely identify duplicates only based on the column recording the patient's id. You can use the <code>subset</code> paramater in <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html">duplicated()</a> and <a href="http://pandas.pydata.org/pandas-docs/version/0.17.1/generated/pandas.DataFrame.drop_duplicates.html">drop_duplicates()</a> to do this.</p>
<h2 id="converting-to-datetime">Converting to datetime</h2>
<p>Incorrect datatypes is also a problem data analysts frequently come across. In this case, the timestamps are represented as strings instead of datetimes. This isn't critical, but datetimes are much more convenient to work with if you want to extract specific information from them or filter them more easily.</p>
<pre><code class="python"># This shows the datatype of timestamp is not yet datetime
df.info()
</code></pre>

<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10 entries, 0 to 10
Data columns (total 6 columns):
user_id          10 non-null int64
product_id       10 non-null int64
liked            10 non-null bool
view_duration    10 non-null float64
source           10 non-null object
timestamp        10 non-null object
dtypes: bool(1), float64(1), int64(2), object(2)
memory usage: 490.0+ bytes
</code></pre>
<pre><code class="python"># Let's use this awesome function to convert this column to datetime
df['timestamp'] = pd.to_datetime(df['timestamp'])
</code></pre>

<pre><code class="python"># Now we can see timestamp is represented as a datetime
df.info()
</code></pre>

<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10 entries, 0 to 10
Data columns (total 6 columns):
user_id          10 non-null int64
product_id       10 non-null int64
liked            10 non-null bool
view_duration    10 non-null float64
source           10 non-null object
timestamp        10 non-null datetime64[ns]
dtypes: bool(1), datetime64[ns](1), float64(1), int64(2), object(1)
memory usage: 490.0+ bytes
</code></pre>
<p>Note that even if you save this to a csv file after making this change, it will be read as a string by default the next time you open it. You'll still have to convert it after opening the csv file, or use parameters like <code>parse_dates</code> in the <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">read_csv()</a> function. <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html">to_datetime()</a> provides parameters for more options if the strings you have to parse are formatted unconventionally.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../assessing/" title="Assessing" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Assessing
              </span>
            </div>
          </a>
        
        
          <a href="../plotting_with_pandas/" title="Plotting" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Plotting
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/vinkrish" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.d9aa80ab.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>